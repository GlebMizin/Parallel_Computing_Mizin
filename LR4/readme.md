***
# ОТЧЕТ

## Лабораторная работа №4: Масштабируемость MPI (время, ускорение, эффективность)

### Сведения о студенте

* **Дата:** 2025-12-28
* **Семестр:** 1
* **Группа:** ПИН-м-о-25-1 (1)
* **Дисциплина:** Параллельные вычисления
* **Студент:** Мизин Глеб Егорович

***

## 1. Цель работы

Экспериментально исследовать масштабируемость параллельной программы на MPI: измерить время выполнения при разном числе процессов, вычислить ускорение (Speedup) и эффективность (Efficiency).

---

## 2. Задание

Для фиксированного размера задачи выполнить запуски на разном числе процессов `p` (1/2/4/8), измерить время выполнения, построить таблицу времени и рассчитать:

* `Speedup S(p) = T(1) / T(p)`
* `Efficiency E(p) = S(p) / p`

---

## 3. Реализация (кратко)

Использована задача умножения матрицы на вектор `b = A · x`:

* Матрица `A` не хранится целиком: каждый процесс **генерирует свой блок строк A детерминированно** (по seed) и умножает на общий вектор `x`.
* `x` генерируется на root и рассылается всем процессам через `Bcast`.
* Время измеряется вокруг вычислений.
* Итоговое время берётся как `max` по процессам (`Allreduce(MAX)`), чтобы учитывать самый медленный процесс.
* Для контроля корректности печатается `checksum` (сумма результатов), он одинаковый для всех запусков.

Использованные MPI операции: `Bcast`, `Barrier`, `Allreduce(MAX)`, `Reduce(SUM)`.

---

## 4. Параметры эксперимента

Размер задачи:

* `M = 2_000_000`
* `N = 200`
* `reps = 1`

---

## 5. Команды запуска

```bash
mpiexec -n 1 python lr4_matvec_bench.py --N 200 --M 2000000
mpiexec -n 2 python lr4_matvec_bench.py --N 200 --M 2000000
mpiexec -n 4 python lr4_matvec_bench.py --N 200 --M 2000000
mpiexec -n 8 python lr4_matvec_bench.py --N 200 --M 2000000
```

---

## 6. Результаты измерений

### 6.1. Время выполнения

Время: `compute_time_max` (максимум по процессам).

| Процессов (p) | Время T(p), сек |
| ------------: | --------------: |
|             1 |        1.451652 |
|             2 |        0.887314 |
|             4 |        0.585846 |
|             8 |        0.507641 |

Контрольная сумма (одинаковая во всех запусках):

* `checksum = 9.511054e+07`

---

### 6.2. Ускорение и эффективность

Формулы:

* `S(p) = T(1) / T(p)`
* `E(p) = S(p) / p`

|  p | T(p), сек | Speedup S(p) | Efficiency E(p) |
| -: | --------: | -----------: | --------------: |
|  1 |  1.451652 |        1.000 |           1.000 |
|  2 |  0.887314 |        1.636 |           0.818 |
|  4 |  0.585846 |        2.478 |           0.619 |
|  8 |  0.507641 |        2.860 |           0.357 |

---

## 7. Анализ (коротко)

С ростом числа процессов время уменьшается, но ускорение растёт не линейно. Основные причины:

* накладные расходы MPI (синхронизации, рассылка/сбор),
* ограничение по памяти/пропускной способности,
* рост издержек при увеличении числа процессов (координация, системные расходы).

На 8 процессах эффективность заметно падает, что типично для сильного масштабирования при фиксированном размере задачи.

---

## 8. Заключение

Выполнены измерения времени выполнения MPI-программы для `p = 1, 2, 4, 8`. Рассчитаны ускорение и эффективность. Получено ускорение до ~2.86 на 8 процессах при эффективности ~0.357.

---